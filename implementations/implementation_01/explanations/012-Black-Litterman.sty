# ğŸŸ¥ **PART 1 â€” What is the Black-Litterman Model? (Zero-Knowledge Start)**

Imagine you want to invest in multiple stocks.
You want to find the **best weights** (allocation %) for each stock.

Traditional portfolio optimization (Markowitz Mean-Variance) has two big problems:

### **1. If you use historical returns, the output is unstable**

Small changes in input â†’ large, crazy changes in weights
(e.g., 90% in TCS, 10% in Relianceâ€”unrealistic).

### **2. If you add your own views, there is no clear way to blend them**

Example: â€œI think INFY will outperform TCS by 2%â€.

Markowitz cannot incorporate such views smoothly.

---

# ğŸŸ© **Black-Litterman fixes both problems**

It **combines two things**:

### âœ” **1. Market equilibrium returns (neutral, objective)**

These are returns implied by the marketâ€™s current prices
â€” what an â€œaverageâ€ investor believes.

### âœ” **2. Your own views (subjective)**

Such as:

* â€œI think stock A will return 5%â€
* â€œI think Reliance will outperform HDFC Bank by 1%â€
* â€œI am 60% confident in this viewâ€

Then it blends (1) and (2) using Bayesian statistics.

**Result â†’ stable, realistic portfolio weights.**

---

# ğŸŸ¥ Intuition in 1 sentence

> **Black-Litterman = Market Consensus + Your Views (with confidence weighting)**
> â†’ producing **posterior/expert-adjusted expected returns**, which then go into classical mean-variance optimization to get portfolio weights.

---

# ğŸŸ¦ **PART 2 â€” Core Idea Using a Simple Example**

Suppose you invest in 2 stocks:

* TCS
* INFOSYS

The market suggests:

* TCS expected return: 8%
* INFY expected return: 10%

But **your view**:

> â€œI think TCS will outperform INFY by 1%â€.

BL will **mathematically blend** these two.

If you are **very confident**, it will trust your view strongly.

If you are **not confident**, it will mostly trust the market.

This is the entire model.

---

# ğŸŸ§ **PART 3 â€” Mathematical Structure**

Black-Litterman steps (in correct sequence):

---

# âœ” **Step 1 â€” Compute Prior (Equilibrium) Returns**

[
\pi = \lambda \Sigma w_{mkt}
]

Where:

* ( \pi ) = implied (equilibrium) returns
* ( \lambda ) = risk aversion (scalar)
* ( \Sigma ) = covariance matrix
* ( w_{mkt} ) = market-cap weights of assets

---

# âœ” **Step 2 â€” Encode Your Views**

Use a matrix **P** and vector **Q**

### Example view:

> â€œTCS - INFY = 1%â€

Then

[
P =
\begin{bmatrix}
1 & -1
\end{bmatrix}
]

[
Q =
\begin{bmatrix}
0.01
\end{bmatrix}
]

---

# âœ” **Step 3 â€” Confidence in each view**

A diagonal matrix

[
\Omega = \text{diag}(\text{uncertainty})
]

Lower uncertainty â‡’ more confidence.

---

# âœ” **Step 4 â€” Compute Posterior Returns**

This is the heart of Black-Litterman:

[
\mu =
\left[
(\tau\Sigma)^{-1} + P^T \Omega^{-1} P
\right]^{-1}
\left[
(\tau\Sigma)^{-1} \pi + P^T \Omega^{-1} Q
\right]
]

Where:

* ( \tau ) = scaling parameter (small number like 0.025)
* ( \mu ) = posterior returns (use these for optimization)

---

# âœ” **Step 5 â€” Run Mean-Variance Optimization**

[
w = \frac{1}{\lambda}\Sigma^{-1}\mu
]

---

# ğŸŸ¥ **PART 4 â€” Fully Solved Numerical Example**

We use a **2-asset example** for clarity.

### Assets:

1. TCS
2. INFOSYS

### Market weights:

* TCS = 60%
* INFY = 40%

[
w_{mkt} =
\begin{bmatrix}
0.6\
0.4
\end{bmatrix}
]

### Covariance matrix:

[
\Sigma =
\begin{bmatrix}
0.04 & 0.01\
0.01 & 0.09
\end{bmatrix}
]

Risk aversion: ( \lambda = 2.5 )
Tau: ( \tau = 0.025 )

---

# âœ” Step 1 â€” Compute Prior Returns (Ï€)

[
\pi = \lambda \Sigma w_{mkt}
]

Compute:

[
\Sigma w_{mkt} =
\begin{bmatrix}
0.04(0.6)+0.01(0.4)\
0.01(0.6)+0.09(0.4)
\end{bmatrix}
=============

\begin{bmatrix}
0.028\
0.042
\end{bmatrix}
]

Now multiply by Î»:

[
\pi =
2.5
\begin{bmatrix}
0.028\
0.042
\end{bmatrix}
=============

\begin{bmatrix}
0.07\
0.105
\end{bmatrix}
]

So market-implied returns:

* TCS = 7%
* INFY = 10.5%

---

# âœ” Step 2 â€” Your View

You think:

> TCS will outperform INFY by 1%

So ( Q = 0.01 )

[
P = \begin{bmatrix} 1 & -1 \end{bmatrix}
]

---

# âœ” Step 3 â€” Confidence

Assume:
Variance of view = 0.0025 (fairly confident)

[
\Omega = \begin{bmatrix} 0.0025 \end{bmatrix}
]

---

# âœ” Step 4 â€” Posterior Return Calculation

We compute:

[
\mu =
[(\tau\Sigma)^{-1} + P^T \Omega^{-1} P]^{-1}
[(\tau\Sigma)^{-1}\pi + P^T \Omega^{-1} Q]
]

Let's do it cleanly:

### First compute Ï„Î£:

[
\tau \Sigma =
0.025
\begin{bmatrix}
0.04 & 0.01\
0.01 & 0.09
\end{bmatrix}
=============

\begin{bmatrix}
0.001 & 0.00025\
0.00025 & 0.00225
\end{bmatrix}
]

Compute its inverse:

[
(\tau\Sigma)^{-1} =
\begin{bmatrix}
1066.7 & -118.5\
-118.5 & 473.5
\end{bmatrix}
]

### Compute part A:

[
A = (\tau\Sigma)^{-1}\pi
]

# [

\begin{bmatrix}
1066.7 & -118.5\
-118.5 & 473.5
\end{bmatrix}
\begin{bmatrix}
0.07\
0.105
\end{bmatrix}
=============

\begin{bmatrix}
63.0\
44.8
\end{bmatrix}
]

### Compute Páµ€Î©â»Â¹Q

Î©â»Â¹ = 400

[
P^T \Omega^{-1} Q =
\begin{bmatrix}
1\ -1
\end{bmatrix}
(400)(0.01)
===========

\begin{bmatrix}
4\
-4
\end{bmatrix}
]

### Compute right side:

[
b = A + P^T\Omega^{-1}Q =
\begin{bmatrix}
63\44.8
\end{bmatrix}
+
\begin{bmatrix}
4\-4
\end{bmatrix}
=============

\begin{bmatrix}
67\
40.8
\end{bmatrix}
]

---

### Compute left side matrix:

[
C = (\tau\Sigma)^{-1} + P^T \Omega^{-1} P
]

Compute ( P^TÎ©^{-1}P ):

[
P^T Î©^{-1} P =
\begin{bmatrix}
1\-1
\end{bmatrix}
(400)
\begin{bmatrix}
1 & -1
\end{bmatrix}
=============

\begin{bmatrix}
400 & -400\
-400 & 400
\end{bmatrix}
]

Now add:

[
C =
\begin{bmatrix}
1066.7 & -118.5\
-118.5 & 473.5
\end{bmatrix}
+
\begin{bmatrix}
400 & -400\
-400 & 400
\end{bmatrix}
=============

\begin{bmatrix}
1466.7 & -518.5\
-518.5 & 873.5
\end{bmatrix}
]

Now invert C:

[
C^{-1} =
\begin{bmatrix}
0.00105 & 0.00062\
0.00062 & 0.00177
\end{bmatrix}
]

---

### Finally compute posterior returns:

[
\mu = C^{-1} b
]

# [

\begin{bmatrix}
0.00105 & 0.00062\
0.00062 & 0.00177
\end{bmatrix}
\begin{bmatrix}
67\
40.8
\end{bmatrix}
=============

\begin{bmatrix}
0.098\
0.088
\end{bmatrix}
]

## ğŸ‘‰ Posterior Returns:

* TCS = **9.8%**
* INFY = **8.8%**

### Interpretation:

Your view â€œTCS will outperform INFY by 1%â€ made:

* TCS return go **higher** than market
* INFY return go **lower** than market

But not as extreme as you said â€” the model blends things smoothly.

---

# ğŸŸ¦ **Step 5 â€” Optimize Weights**

[
w = \frac{1}{\lambda}\Sigma^{-1}\mu
]

Assume:
[
\Sigma^{-1} =
\begin{bmatrix}
26.47 & -2.94\
-2.94 & 11.76
\end{bmatrix}
]

Compute:

[
w^* = \frac{1}{2.5}
\begin{bmatrix}
26.47 & -2.94\
-2.94 & 11.76
\end{bmatrix}
\begin{bmatrix}
0.098\
0.088
\end{bmatrix}
]

[
w^* =
\begin{bmatrix}
0.66\
0.34
\end{bmatrix}
]

### Final Allocation (Black-Litterman):

* **66% in TCS**
* **34% in INFOSYS**

Which is:

* close to market cap weights (60-40)
* adjusted moderately by your view
* stable and realistic

---

# ğŸŸ© **Summary (Perfect for Revision)**

| Step | Meaning                                          |
| ---- | ------------------------------------------------ |
| 1    | Compute equilibrium returns (Ï€) from market caps |
| 2    | Encode your views using P, Q                     |
| 3    | Add confidence matrix Î©                          |
| 4    | Compute blended returns (posterior) Î¼            |
| 5    | Optimize to get final portfolio weights          |

Benefits:

* stable weights
* mixes subjective + objective
* avoids extreme allocations
* mathematically principled

